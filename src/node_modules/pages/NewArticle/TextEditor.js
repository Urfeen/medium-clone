import React, { useState, useEffect } from 'react';
import { EditorState, convertToRaw, ContentState } from 'draft-js';
import { Editor } from 'react-draft-wysiwyg';
import draftToHtml from 'draftjs-to-html';
import htmlToDraft from 'html-to-draftjs';
import 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';
import LangsTranslate from "LangsTranslate/LangsTranslate.json";

const TextEditor = ({ currentLang, defaultHTML, setArticleText }) => {
  const newArticleTextTranslate = LangsTranslate[currentLang].newArticle["article-text"];

  let _contentState = ContentState.
    createFromBlockArray(htmlToDraft(defaultHTML || `<p>${newArticleTextTranslate}</p>`));

  const raw = convertToRaw(_contentState)
  const [contentState, setContentState] = useState(raw)

  useEffect(() => {
    setArticleText(draftToHtml(contentState));
  }, [contentState])
  return (
    <Editor
      defaultContentState={contentState}
      onContentStateChange={setContentState}
    />
  )
}

export default TextEditor;